
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Sam Vaughan">
      
      
      
        <link rel="prev" href="../scripts/">
      
      
        <link rel="next" href="../interactive_tools/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.5">
    
    
      
        <title>FAQs and Troubleshooting - Making tiles for Hector Observing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#faqs-and-troubleshooting" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Making tiles for Hector Observing" class="md-header__button md-logo" aria-label="Making tiles for Hector Observing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Making tiles for Hector Observing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              FAQs and Troubleshooting
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/samvaughan/hector-observing/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Hector Observing
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Making tiles for Hector Observing" class="md-nav__button md-logo" aria-label="Making tiles for Hector Observing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Making tiles for Hector Observing
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/samvaughan/hector-observing/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Hector Observing
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Making_A_Hector_Tile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Making a Hector Tile
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scripts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    FAQs and Troubleshooting
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    FAQs and Troubleshooting
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-allocation-code-fails-and-says-some-magnets-are-fully-blocked" class="md-nav__link">
    <span class="md-ellipsis">
      The allocation code fails and says "Some magnets are fully blocked!"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-has-an-error-which-mentions-the-files-below-seem-to-be-incomplete" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake has an error which mentions "The files below seem to be incomplete".
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-complains-about-index-0-is-out-of-bounds-for-axis-with-size-0-and-mentions-the-_get_tile_filename-function" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake complains about "Index 0 is out of bounds for axis with size 0" and mentions the _get_tile_filename function.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-says-there-is-no-rule-to-make-filename" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake says "there is no rule to make {filename}"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-says-looks-like-we-have-a-mismatch-between-the-tile-numbers-and-the-filenames-somewhere" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake says "Looks like we have a mismatch between the tile numbers and the filenames somewhere"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-distortion-correction-code-complains-about-reading-past-the-end-of-a-file" class="md-nav__link">
    <span class="md-ellipsis">
      The distortion correction code complains about "Reading past the end of a file"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-complains-about-error-tokenizing-data-expecting-5-lines-of-data-saw-n" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake complains about "Error Tokenizing data: Expecting 5 lines of data, saw {n}"
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../interactive_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interactive Tools
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-allocation-code-fails-and-says-some-magnets-are-fully-blocked" class="md-nav__link">
    <span class="md-ellipsis">
      The allocation code fails and says "Some magnets are fully blocked!"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-has-an-error-which-mentions-the-files-below-seem-to-be-incomplete" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake has an error which mentions "The files below seem to be incomplete".
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-complains-about-index-0-is-out-of-bounds-for-axis-with-size-0-and-mentions-the-_get_tile_filename-function" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake complains about "Index 0 is out of bounds for axis with size 0" and mentions the _get_tile_filename function.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-says-there-is-no-rule-to-make-filename" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake says "there is no rule to make {filename}"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-says-looks-like-we-have-a-mismatch-between-the-tile-numbers-and-the-filenames-somewhere" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake says "Looks like we have a mismatch between the tile numbers and the filenames somewhere"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-distortion-correction-code-complains-about-reading-past-the-end-of-a-file" class="md-nav__link">
    <span class="md-ellipsis">
      The distortion correction code complains about "Reading past the end of a file"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snakemake-complains-about-error-tokenizing-data-expecting-5-lines-of-data-saw-n" class="md-nav__link">
    <span class="md-ellipsis">
      Snakemake complains about "Error Tokenizing data: Expecting 5 lines of data, saw {n}"
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="faqs-and-troubleshooting">FAQs and troubleshooting</h1>
<p>Below are some frequently asked questions or bugs that have arisen during our use of the pipeline.</p>
<h2 id="the-allocation-code-fails-and-says-some-magnets-are-fully-blocked">The allocation code fails and says "Some magnets are fully blocked!"</h2>
<p>This means that there is no way for the Robot to place the magnets in the desired positions. The robot arm itself has a set clearance when it picks up and puts down magnets, and so some magnet configurations which don't clash aren't actually possible to put on the plate.</p>
<p>In this case, you'll need to go back and use the interactive configuration tool to change the magnet positions to have a bit more clearance. The error message will let you know which magnets are affected.</p>
<h2 id="snakemake-has-an-error-which-mentions-the-files-below-seem-to-be-incomplete">Snakemake has an error which mentions <em>"<code>The files below seem to be incomplete</code>"</em>.</h2>
<p>This happens when a <code>snakemake</code> task doesn't finish properly- often because it's been killed by someone pressing <code>Ctrl-C</code>. It's basically saying "I don't know if the files below are finished or not!".</p>
<p>If you want to re-run the task which <code>snakemake</code> was in the middle of before it was killed, add <code>--rerun-incomplete</code> to the beginning of your command (e.g <code>snakemake --rerun-incomplete --configfile ...</code> etc). </p>
<p>If you <em>don't</em> want to re-run the command that was killed, there are two options. I've found the best thing to do is delete the <code>.snakemake</code> folder: <code>rm -r .snakemake</code>. This deletes <code>snakemake's</code> history and it just forgets that it was halfway through a step. You can also follow the commands that <code>snakemake</code> suggests, about "cleaning up metadata", but I've found that this often doesn't work for some reason... (see e.g. <a href="https://github.com/snakemake/snakemake/issues/1497">this</a> github issue).</p>
<h2 id="snakemake-complains-about-index-0-is-out-of-bounds-for-axis-with-size-0-and-mentions-the-_get_tile_filename-function">Snakemake complains about <em>"<code>Index 0 is out of bounds for axis with size 0</code>"</em> and mentions the <em><code>_get_tile_filename</code></em> function.</h2>
<p>This happens because Snakemake is trying to select a row from your <code>{start_date}_{end_date}_galaxy_tiles.csv</code> but there aren't any matches. Check that you've typed the tile filename exactly right on the command line (it's very easy to type <code>G12_tile_220</code> instead of <code>G15_tile_220</code>, for example!)</p>
<h2 id="snakemake-says-there-is-no-rule-to-make-filename">Snakemake says "there is no rule to make {filename}"</h2>
<p>This happens when <code>snakemake</code> can't figure out how to create the output file you've asked for. </p>
<p>The most common cause of this is a typo in the filename you've passed it (e.g. asking it to make <code>G155_tile_220.tar.gz</code> will fail, for example). Another possible cause would be if you're asking it to make a tile which you haven't entered in the <code>resources/{run_dates}/{run_dates}_galaxy_tiles.csv</code> file. Check that the tile is located there and doesn't have any typos.</p>
<h2 id="snakemake-says-looks-like-we-have-a-mismatch-between-the-tile-numbers-and-the-filenames-somewhere">Snakemake says "Looks like we have a mismatch between the tile numbers and the filenames somewhere"</h2>
<p>This occurs when one (or more) of the rows in the <code>resources/{run_dates}/{run_dates}_galaxy_tiles.csv</code> is incorrect. If you tell <code>snakemake</code> to use a tile file from one tile number and a guide tile from another (e.g. one row references two different numbers), or if your tile number column in that file doesn't match the filenames, you'll see this error. Go back and check that all of the rows in that file are correct!</p>
<h2 id="the-distortion-correction-code-complains-about-reading-past-the-end-of-a-file">The distortion correction code complains about "Reading past the end of a file"</h2>
<p>This means a sky mask fits file the code is trying to read is corrupted or damaged. </p>
<p>The distortion correction code reads <em>all</em> fits files in the folder path you give it, so make sure there aren't any files in there which aren't sky masks. We've seen this error before when the distortion correction code tried to read a hidden file called <code>._segmap_waves_18.0_-34.1_1.41_1.17.fits</code>. After deleting this file and all the others like it, everything worked as expected.</p>
<h2 id="snakemake-complains-about-error-tokenizing-data-expecting-5-lines-of-data-saw-n">Snakemake complains about "Error Tokenizing data: Expecting 5 lines of data, saw {n}"</h2>
<p>This is almost certainly caused by a typo in the <code>resources/{run_dates}/{run_dates}_galaxy_tiles.csv</code>. Check that you haven't added or forgotten a comma somewhere.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c18c5fb9.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>