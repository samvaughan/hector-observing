
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Sam Vaughan">
      
      
      
        <link rel="prev" href="../FAQs/">
      
      
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.5">
    
    
      
        <title>Interactive Tools - Making tiles for Hector Observing</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#interactive-tools" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Making tiles for Hector Observing" class="md-header__button md-logo" aria-label="Making tiles for Hector Observing" data-md-component="logo">
      
  <img src="../img/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Making tiles for Hector Observing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Interactive Tools
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/samvaughan/hector-observing/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Hector Observing
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Making tiles for Hector Observing" class="md-nav__button md-logo" aria-label="Making tiles for Hector Observing" data-md-component="logo">
      
  <img src="../img/favicon.png" alt="logo">

    </a>
    Making tiles for Hector Observing
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/samvaughan/hector-observing/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Hector Observing
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Making_A_Hector_Tile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Making a Hector Tile
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scripts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../FAQs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQs and Troubleshooting
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Interactive Tools
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Interactive Tools
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#selecting-galaxies-to-create-a-tile-from-scratch" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting galaxies to create a tile from scratch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Selecting galaxies to create a tile from scratch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-the-app" class="md-nav__link">
    <span class="md-ellipsis">
      Starting the app
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes-and-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Notes and Tips
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-a-field-plate-interactively" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring a Field Plate Interactively
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Other Hector Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Other Hector Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http://samvaughan.info/hector-tiling" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tiling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http://samvaughan.info/hector-input-catalogues" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Input Catalogues
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#selecting-galaxies-to-create-a-tile-from-scratch" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting galaxies to create a tile from scratch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Selecting galaxies to create a tile from scratch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-the-app" class="md-nav__link">
    <span class="md-ellipsis">
      Starting the app
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes-and-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Notes and Tips
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-a-field-plate-interactively" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring a Field Plate Interactively
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="interactive-tools">Interactive tools</h1>
<p>There are two interactive tools which have been built to help with running these tools. One of these allows you to select galaxies and make a brand new tile, and the other allows you to configure magnets on the field plate by hand.</p>
<h2 id="selecting-galaxies-to-create-a-tile-from-scratch">Selecting galaxies to create a tile from scratch</h2>
<p>The script <code>interactive_apps/HectorTilingApp.py</code> launches a <a href="https://dash.plotly.com/">dash/plotly</a> app to create a Hector tile from scratch by clicking on galaxies, guide stars and standard stars. These tiles can then be saved and run through the pipeline to make a set of files which can be observed at the telescope. This is particularly important for the beginning of every observing run, where two special "SNAFU" tiles are needed for the first and second halves of the first night.</p>
<h3 id="starting-the-app">Starting the app</h3>
<p>The app needs a catalogue of galaxy targets, standard stars and guide stars for a given region of sky. You also need to pass the name of the region you're running. At the command line, run:</p>
<pre><code class="language-bash">python interactive_apps/HectorTilingApp.py /path/to/target_catalogue.csv /path/to/standard_star_catalogue.csv /path/to/guide_star_catalogue.csv field_name
</code></pre>
<p>Note that the code expects that the standard star and guide star catalogues name have "standard_star" and "guide_star" in their filenames, and will error if this isn't the case. This was added to catch the bug where you pass these two catalogues to the code in the wrong order!</p>
<p>You should get the following in the terminal:</p>
<p><img alt="Terminal output from running HectorTilingApp.py" src="../img/tile_app_terminal.png" /></p>
<p>Copy the web address (in this case <code>http://127.0.0.1:8051/</code>) into a browser. Note that the exact port number you see might be different! You should see the following:</p>
<p><img alt="Hector Tiling App annotated" src="../img/Interactive_App_1_annotated.png" /></p>
<p><img alt="Hector Tiling App annotated" src="../img/Interactive_App_2_annotated.png" /></p>
<p>You can now move the Hector Field of View around by using the "Tile RA" and "Tile DEC" values at the top. Note that at low declinations, the FoV will appear more like an ellipse than a circle- this is correct and nothing to worry about!</p>
<p>You can add a given galaxy to the tile by clicking on it. Click on it again to remove it. When you're done picking galaxies, change the target selection box to standard stars or guide stars and continue. </p>
<p>When you've selected a few galaxies and stars, you'll see something this:</p>
<p><img alt="Hector Tiling App annotated" src="../img/Interactive_App_3_annotated.png" /></p>
<p>Note that this image is flipped up/down compared to when you look at Hector on the telescope- so the cable gap at the bottom of the plate is actually </p>
<p>Every tile <em>must</em> have all hexabundles in use at all times. This means that every tile must contain 19 galaxy targets, 2 standard stars and 6 guide stars. It's okay to select more guides and standards than this: you can select which are actually allocated hexabundles during the Observing pipeline.</p>
<h3 id="notes-and-tips">Notes and Tips</h3>
<ul>
<li>Note that the slider on the bottom marked "Zoom Level" makes the entire interactive box smaller or larger. If you click and drag a square on the data then you can zoom in on a specific region of the field. </li>
<li>For a SNAFU tile, we need a guide star located 5" from the centre of the tile. I find it easiest to pick a guide star, then take 5" from its declination and place the tile centre at those coordinates.</li>
<li>Sometimes it can be a bit fiddly to click on a galaxy to remove it. Apologies about this, but it will work eventually!</li>
<li>As of November 2023, we're only using guide stars within the central 70% of the Field of View. Guides outside of this radius are automatically removed from the guide file by the pipeline. </li>
<li>For fields at low declination, the Hector FoV will appear like an oval rather than a circle. This is intended! It's a consequence of mapping a a fixed circular object (the Hector FoV) with a physical width onto a spherical surface (the sky). At the poles, lines of constant RA get closer together and so the radius of the FoV has a <span class="arithmatex">\(\cos(\delta)\)</span> scaling factor.</li>
</ul>
<h2 id="configuring-a-field-plate-interactively">Configuring a Field Plate Interactively</h2>
<p>Open the file <code>interactive_apps/app_V3.R</code> in R-studio. At the top, click "run app" and a pop-up window should appear like below. I usually also select "open in browser". </p>
<p><img alt="Starting screen of the interactive configuration app" src="../img/Config_App.png" /></p>
<p>After selecting a tile file and a guide tile in the top left corner, you'll see something like this:</p>
<p><img alt="Interactive Apps with probes" src="../img/Config_App_with_Probes.png" /></p>
<p>Galaxies are coloured in blue, guide stars in yellow and standard stars in red. Double click on the head of a probe you want to rotate, then click again at the desired angle. Click "Fix Probe" on the left to save this new angle. Repeat until you have a finished configuration! The text above the "Fix Probe" button will let you know the number of conflicts in the field. This must be zero for a finished tile. You can download your tiles by clicking the "Save new Hexa file" and "Save new Guide file" on the left.</p>
<p>Note that the code <em>does not check that probes are orientated outside the field of view</em>. You must ensure that all the magnets are actually on the plate before continuing. </p>
<p>At the bottom left, there are advanced options to get the code to give you a "first guess" for each set of probes. When starting a field completely from scratch, this first guess is often not a bad first approximation and using it can speed up the process.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.progress"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c18c5fb9.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>